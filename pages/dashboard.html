<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Encuestas</title>
    <meta name="description" content="Panel administrativo para visualizaci√≥n de resultados de encuestas">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/theme-dashboard.css?v=2" />
    <style>
        /* Lista de Comentarios (CORE: Soluci√≥n al problema) */
#commentsList {
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.comment-item {
    background-color: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    border-left: 5px solid #ccc; /* Border default */
}
.comment-item.placeholder {
    text-align: center;
    color: #6c757d;
    font-style: italic;
    border-left: 5px solid #ffc107;
}
.comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}
.comment-category {
    font-size: 1rem;
    font-weight: 600;
    color: var(--primary);
}
.comment-sentiment {
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 4px;
    font-weight: 500;
    color: white;
}
.sentiment-positive {
    background-color: var(--success);
}
.sentiment-negative {
    background-color: var(--danger);
}
.sentiment-neutral {
    background-color: #6c757d;
}
.comment-text {
    font-size: 0.95rem;
    margin-bottom: 10px;
    line-height: 1.5;
}
.comment-footer small {
    color: #999;
    font-size: 0.75rem;
}
    </style>
</head>
<body data-theme="dashboard">
    <!-- Barra lateral -->
    <nav class="sidebar" role="navigation" aria-label="Navegaci√≥n principal">
        <div class="sidebar-header">
            <h1>Hydro-Conecta</h1>
            <h3>Panel Admin</h3>
            <p>Sistema de Encuestas</p>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" data-section="results" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">üìä</span>
                <span>Resultados</span>
            </li>
            <li class="nav-item" data-section="map" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">üó∫Ô∏è</span>
                <span>Mapa</span>
            </li>
            <li class="nav-item" data-section="users" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">üë•</span>
                <span>Usuarios</span>
            </li>
        </ul>
    </nav>

    <!-- Contenido principal -->
    <main class="main-content" role="main">
        <!-- Secci√≥n: Resultados -->
        <section id="results" class="section active" aria-labelledby="results-title">
            <div class="section-header">
                <h2 id="results-title">Resultados de la Encuesta</h2>
                <p>An√°lisis general de las respuestas recibidas</p>
            </div>

            <div class="stats-grid" role="region" aria-label="Estad√≠sticas generales">
                <div class="stat-card">
                    <div class="stat-label">Total Respuestas</div>
                    <div class="stat-value">1,247</div>
                    <div class="stat-change positive">‚Üë 12% esta semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Tasa de Completaci√≥n</div>
                    <div class="stat-value">87%</div>
                    <div class="stat-change positive">‚Üë 5% esta semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Promedio Tiempo</div>
                    <div class="stat-value">4.2m</div>
                    <div class="stat-change negative">‚Üì 0.3m esta semana</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Satisfacci√≥n</div>
                    <div class="stat-value">92%</div>
                    <div class="stat-change positive">‚Üë 3% esta semana</div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Distribuci√≥n de Respuestas por Pregunta</div>
                <div class="chart">
                    <div class="bar-chart" id="barChart" role="img" aria-label="Gr√°fico de barras de respuestas por pregunta"></div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Respuestas por Categor√≠a</div>
                <div class="chart">
                    <div class="bar-chart" id="categoryChart" role="img" aria-label="Gr√°fico de barras de respuestas por categor√≠a"></div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n: Mapa -->
        <section id="map-section" class="section" aria-labelledby="map-title">
            <div class="section-header">
                <h2 id="map-title">Mapa Interactivo</h2>
                <p>Visualizaci√≥n geogr√°fica de los resultados</p>
            </div>
            <div id="map" role="region" aria-label="Mapa de ubicaciones de usuarios"></div>
        </section>

        <!-- Secci√≥n: Usuarios -->
        <section id="users-section" class="section" aria-labelledby="users-title">
            <div class="section-header">
                <h2 id="users-title">Usuarios Participantes</h2>
                <p>Lista de personas que han completado la encuesta</p>
            </div>
            <div class="users-table" role="region" aria-label="Tabla de usuarios">
                <div class="table-header" role="row">
                    <div role="columnheader">Usuario</div>
                    <div role="columnheader">Ubicaci√≥n</div>
                    <div role="columnheader">Fecha de Respuesta</div>
                    <div role="columnheader">Estado</div>
                </div>
                <div id="usersTableBody" role="rowgroup"></div>
            </div>
        </section>
        <section id="results" class="section active" aria-labelledby="results-title">
            <div class="comments-section" role="region" aria-label="Comentarios filtrados por IA">
                <div class="section-header">
                    <h2 id="comments-title">Comentarios, Solicitudes y Reclamos (Filtrados por IA)</h2>
                    <p>Utiliza los filtros de Categor√≠a y Sentimiento para gestionar los comentarios.</p>
                </div>
                <div class="filter-controls">
                    <label for="categoryFilter">Categor√≠a (IA):</label>
                    <select id="categoryFilter" class="dashboard-filter">
                        <option value="all">Todas las Categor√≠as</option>
                        <option value="reclamo">Reclamo</option>
                        <option value="solicitud">Solicitud</option>
                        <option value="duda">Duda</option>
                        <option value="general">General</option>
                    </select>
                    <label for="sentimentFilter">Sentimiento (IA):</label>
                    <select id="sentimentFilter" class="dashboard-filter">
                        <option value="all">Todo el Sentimiento</option>
                        <option value="positivo">Positivo</option>
                        <option value="negativo">Negativo</option>
                        <option value="neutral">Neutral</option>
                    </select>
                    
                    <button id="applyFilterBtn" class="filter-button">Aplicar Filtros</button>
                </div>
                <div class="comments-list" id="commentsList">
                    <div class="comment-item placeholder">Cargando comentarios...</div>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script src="/assets/js/dashboard.js"></script>
</body>
</html>